 # 危废转移预约模块前端开发指南

## 1. 模块概述

### 1.1 功能描述
危废转移预约管理模块是一个完整的预约申请和管理系统，主要用于管理产废企业的转移预约申请、回收企业的分配确认以及预约状态的全生命周期管理。

### 1.2 核心功能
- 预约申请管理（CRUD操作）
- 预约状态流转（待处理→待确认→已确认→已生成订单）
- 企业分配管理（自动分配、手动指定）
- 双端支持（管理后台 + APP端）
- 地理位置管理
- 文件附件管理
- 数据导入导出
- 统计报表功能

## 2. 技术栈要求

### 2.1 前端技术栈
- **框架**: Vue 3.3+ + TypeScript 5.0+
- **UI组件库**: Element Plus 2.4+
- **状态管理**: Pinia 2.1+
- **路由管理**: Vue Router 4.2+
- **HTTP客户端**: Axios 1.5+
- **构建工具**: Vite 4.4+
- **代码规范**: ESLint + Prettier + TypeScript ESLint

### 2.2 开发环境
- Node.js >= 18.0.0
- npm >= 9.0.0 或 pnpm >= 8.0.0

## 3. 项目结构

```
src/
├── views/
│   └── waste/
│       └── appointment/
│           ├── index.vue              # 管理后台列表页面
│           ├── form.vue              # 表单页面（新增/编辑）
│           ├── detail.vue            # 详情页面
│           └── app/
│               ├── index.vue         # APP端列表页面
│               ├── create.vue        # APP端创建页面
│               └── detail.vue        # APP端详情页面
├── api/
│   └── waste/
│       └── appointment.ts            # API接口定义
├── types/
│   └── waste/
│       └── appointment.ts            # TypeScript类型定义
└── components/
    └── waste/
        └── appointment/
            ├── StatusTag.vue         # 状态标签组件
            ├── AssignmentForm.vue    # 分配表单组件
            ├── LocationPicker.vue    # 地理位置选择组件
            └── WasteInfoForm.vue     # 废物信息表单组件
```

## 4. 数据模型定义

### 4.1 预约实体
```typescript
interface AppointmentVO {
  id?: number;
  appointmentNo: string;                    // 预约单号
  
  // 产废企业信息
  producerEnterpriseId: number;            // 产废企业ID
  producerEnterpriseName: string;          // 产废企业名称
  producerContactName: string;             // 联系人姓名
  producerContactPhone: string;            // 联系人电话
  
  // 回收企业信息
  recyclerEnterpriseId?: number;           // 回收企业ID
  recyclerEnterpriseName?: string;         // 回收企业名称
  assignmentType: AssignmentType;          // 分配方式
  assignmentTime?: Date;                   // 分配时间
  assignmentOperator?: string;             // 分配操作人
  
  // 废物信息
  wasteCode: string;                       // 危险废物代码
  wasteName: string;                       // 危险废物名称
  wasteCategory: string;                   // 废物类别
  estimatedQuantity: number;               // 预估数量
  quantityUnit: string;                    // 数量单位
  wasteDescription?: string;               // 废物描述
  
  // 地址信息
  pickupAddress: string;                   // 取货地址
  pickupLatitude?: number;                 // 取货地址纬度
  pickupLongitude?: number;                // 取货地址经度
  deliveryAddress?: string;                // 送货地址
  deliveryLatitude?: number;               // 送货地址纬度
  deliveryLongitude?: number;              // 送货地址经度
  
  // 时间信息
  expectedPickupTime: Date;                // 期望取货时间
  expectedDeliveryTime?: Date;             // 期望送达时间
  
  // 状态信息
  appointmentStatus: AppointmentStatus;    // 预约状态
  confirmTime?: Date;                      // 确认时间
  rejectTime?: Date;                       // 拒绝时间
  rejectReason?: string;                   // 拒绝原因
  cancelTime?: Date;                       // 取消时间
  cancelReason?: string;                   // 取消原因
  
  // 业务信息
  businessMode: BusinessMode;              // 业务模式
  isUrgent: boolean;                       // 是否紧急
  priorityLevel: number;                   // 优先级
  
  // 关联信息
  orderId?: number;                        // 关联订单ID
  contractId?: number;                     // 关联合同ID
  
  remark?: string;                         // 备注
  createTime?: Date;                       // 创建时间
  updateTime?: Date;                       // 更新时间
}

enum AppointmentStatus {
  PENDING = 0,                    // 待处理
  WAITING_RECYCLER_CONFIRM = 1,   // 待回收方确认
  CONFIRMED = 2,                  // 已确认
  REJECTED = 3,                   // 已拒绝
  ORDER_GENERATED = 4,            // 已生成订单
  CANCELLED = 5                   // 已取消
}

enum AssignmentType {
  AUTO_ASSIGNMENT = 0,            // 自动分配
  USER_SELECTION = 1,             // 用户选择
  SYSTEM_RULE = 2,                // 系统规则分配
  MANUAL_ASSIGNMENT = 3           // 管理员手动指定
}

enum BusinessMode {
  INDEPENDENT_OPERATION = 0,      // 独立运营
  PLATFORM_BIDDING = 1,          // 平台竞价
  HYBRID_MODE = 2                // 混合模式
}
```

## 5. API接口规范

### 5.1 管理后台接口
```typescript
// 获取预约分页列表
export const getAppointmentPage = (params: AppointmentPageReqVO) => {
  return request.get({ url: '/waste/appointment/page', params })
}

// 获取预约详情
export const getAppointment = (id: number) => {
  return request.get({ url: `/waste/appointment/get?id=${id}` })
}

// 创建预约
export const createAppointment = (data: AppointmentCreateReqVO) => {
  return request.post({ url: '/waste/appointment/create', data })
}

// 更新预约
export const updateAppointment = (data: AppointmentUpdateReqVO) => {
  return request.put({ url: '/waste/appointment/update', data })
}

// 删除预约
export const deleteAppointment = (id: number) => {
  return request.delete({ url: `/waste/appointment/delete?id=${id}` })
}

// 确认预约
export const confirmAppointment = (id: number, confirmReason?: string) => {
  return request.put({ 
    url: '/waste/appointment/confirm', 
    params: { id, confirmReason } 
  })
}

// 拒绝预约
export const rejectAppointment = (id: number, rejectReason: string) => {
  return request.put({ 
    url: '/waste/appointment/reject', 
    params: { id, rejectReason } 
  })
}

// 取消预约
export const cancelAppointment = (id: number, cancelReason: string) => {
  return request.put({ 
    url: '/waste/appointment/cancel', 
    params: { id, cancelReason } 
  })
}

// 分配回收企业
export const assignRecyclerEnterprise = (data: AssignRecyclerReqVO) => {
  return request.put({ url: '/waste/appointment/assign-recycler', data })
}

// 自动分配回收企业
export const autoAssignRecyclerEnterprise = (id: number) => {
  return request.put({ url: `/waste/appointment/auto-assign-recycler?id=${id}` })
}

// 生成订单
export const generateOrder = (id: number) => {
  return request.post({ url: `/waste/appointment/generate-order?id=${id}` })
}
```

### 5.2 APP端接口
```typescript
// APP端创建预约
export const createAppointmentByApp = (data: AppAppointmentCreateReqVO) => {
  return request.post({ url: '/waste/app/appointment/create', data })
}

// APP端获取我的预约分页
export const getMyAppointmentPage = (params: AppAppointmentPageReqVO) => {
  return request.get({ url: '/waste/app/appointment/page', params })
}

// APP端获取预约详情
export const getMyAppointmentDetail = (id: number) => {
  return request.get({ url: `/waste/app/appointment/get?id=${id}` })
}

// APP端取消预约
export const cancelMyAppointment = (id: number, cancelReason: string) => {
  return request.put({ 
    url: '/waste/app/appointment/cancel', 
    params: { id, cancelReason } 
  })
}
```

## 6. 页面开发规范

### 6.1 管理后台列表页面
```vue
<template>
  <div class="app-container">
    <!-- 搜索表单 -->
    <el-form :model="queryParams" ref="queryFormRef" :inline="true">
      <el-form-item label="预约单号" prop="appointmentNo">
        <el-input 
          v-model="queryParams.appointmentNo" 
          placeholder="请输入预约单号" 
          clearable 
        />
      </el-form-item>
      <el-form-item label="产废企业" prop="producerEnterpriseName">
        <el-input 
          v-model="queryParams.producerEnterpriseName" 
          placeholder="请输入产废企业名称" 
          clearable 
        />
      </el-form-item>
      <el-form-item label="预约状态" prop="appointmentStatus">
        <el-select v-model="queryParams.appointmentStatus" placeholder="请选择状态" clearable>
          <el-option label="全部" value="" />
          <el-option 
            v-for="dict in getIntDictOptions(DICT_TYPE.WASTE_APPOINTMENT_STATUS)"
            :key="dict.value" 
            :label="dict.label" 
            :value="dict.value" 
          />
        </el-select>
      </el-form-item>
      <el-form-item label="是否紧急" prop="isUrgent">
        <el-select v-model="queryParams.isUrgent" placeholder="请选择" clearable>
          <el-option label="全部" value="" />
          <el-option label="是" :value="true" />
          <el-option label="否" :value="false" />
        </el-select>
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="handleQuery">
          <Icon icon="ep:search" class="mr-5px" />
          搜索
        </el-button>
        <el-button @click="resetQuery">
          <Icon icon="ep:refresh" class="mr-5px" />
          重置
        </el-button>
      </el-form-item>
    </el-form>

    <!-- 操作工具栏 -->
    <el-row :gutter="10" class="mb8">
      <el-col :span="1.5">
        <el-button 
          type="primary" 
          @click="openForm('create')"
          v-hasPermi="['waste:appointment:create']"
        >
          <Icon icon="ep:plus" class="mr-5px" />
          新增
        </el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button 
          type="success" 
          @click="handleExport"
          v-hasPermi="['waste:appointment:export']"
        >
          <Icon icon="ep:download" class="mr-5px" />
          导出
        </el-button>
      </el-col>
    </el-row>

    <!-- 数据表格 -->
    <el-table v-loading="loading" :data="list" stripe>
      <el-table-column label="预约单号" prop="appointmentNo" width="180" />
      <el-table-column label="产废企业" prop="producerEnterpriseName" />
      <el-table-column label="回收企业" prop="recyclerEnterpriseName" />
      <el-table-column label="废物信息" width="200">
        <template #default="scope">
          <div>{{ scope.row.wasteCode }} - {{ scope.row.wasteName }}</div>
          <div class="text-xs text-gray-500">
            {{ scope.row.estimatedQuantity }}{{ scope.row.quantityUnit }}
          </div>
        </template>
      </el-table-column>
      <el-table-column label="期望取货时间" prop="expectedPickupTime" width="180">
        <template #default="scope">
          {{ formatDate(scope.row.expectedPickupTime) }}
        </template>
      </el-table-column>
      <el-table-column label="状态" prop="appointmentStatus" width="120">
        <template #default="scope">
          <StatusTag :status="scope.row.appointmentStatus" />
        </template>
      </el-table-column>
      <el-table-column label="紧急程度" width="100">
        <template #default="scope">
          <el-tag v-if="scope.row.isUrgent" type="danger" size="small">紧急</el-tag>
          <el-tag v-else type="info" size="small">普通</el-tag>
        </template>
      </el-table-column>
      <el-table-column label="创建时间" prop="createTime" width="180">
        <template #default="scope">
          {{ formatDate(scope.row.createTime) }}
        </template>
      </el-table-column>
      <el-table-column label="操作" fixed="right" width="300">
        <template #default="scope">
          <el-button 
            type="primary" 
            link 
            @click="openDetail(scope.row.id)"
            v-hasPermi="['waste:appointment:query']"
          >
            详情
          </el-button>
          <el-button 
            type="primary" 
            link 
            @click="openForm('update', scope.row.id)"
            v-hasPermi="['waste:appointment:update']"
            v-if="canEdit(scope.row.appointmentStatus)"
          >
            编辑
          </el-button>
          <el-button 
            type="success" 
            link 
            @click="handleConfirm(scope.row)"
            v-hasPermi="['waste:appointment:confirm']"
            v-if="canConfirm(scope.row.appointmentStatus)"
          >
            确认
          </el-button>
          <el-button 
            type="warning" 
            link 
            @click="handleReject(scope.row)"
            v-hasPermi="['waste:appointment:reject']"
            v-if="canReject(scope.row.appointmentStatus)"
          >
            拒绝
          </el-button>
          <el-button 
            type="info" 
            link 
            @click="handleAssign(scope.row)"
            v-hasPermi="['waste:appointment:assign']"
            v-if="canAssign(scope.row.appointmentStatus)"
          >
            分配
          </el-button>
          <el-button 
            type="danger" 
            link 
            @click="handleDelete(scope.row.id)"
            v-hasPermi="['waste:appointment:delete']"
            v-if="canDelete(scope.row.appointmentStatus)"
          >
            删除
          </el-button>
        </template>
      </el-table-column>
    </el-table>

    <!-- 分页组件 -->
    <Pagination
      :total="total"
      v-model:page="queryParams.pageNo"
      v-model:limit="queryParams.pageSize"
      @pagination="getList"
    />

    <!-- 表单弹窗 -->
    <AppointmentForm ref="formRef" @success="getList" />
    
    <!-- 详情弹窗 -->
    <AppointmentDetail ref="detailRef" />
    
    <!-- 分配弹窗 -->
    <AssignmentForm ref="assignmentRef" @success="getList" />
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, onMounted } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { getAppointmentPage, deleteAppointment, confirmAppointment, rejectAppointment } from '@/api/waste/appointment'
import { AppointmentStatus } from '@/types/waste/appointment'
import StatusTag from '@/components/waste/appointment/StatusTag.vue'
import AppointmentForm from './form.vue'
import AppointmentDetail from './detail.vue'
import AssignmentForm from '@/components/waste/appointment/AssignmentForm.vue'

// 响应式数据
const loading = ref(true)
const list = ref([])
const total = ref(0)
const queryFormRef = ref()
const formRef = ref()
const detailRef = ref()
const assignmentRef = ref()

const queryParams = reactive({
  pageNo: 1,
  pageSize: 10,
  appointmentNo: '',
  producerEnterpriseName: '',
  appointmentStatus: '',
  isUrgent: ''
})

// 方法定义
const getList = async () => {
  loading.value = true
  try {
    const data = await getAppointmentPage(queryParams)
    list.value = data.list
    total.value = data.total
  } finally {
    loading.value = false
  }
}

const handleQuery = () => {
  queryParams.pageNo = 1
  getList()
}

const resetQuery = () => {
  queryFormRef.value?.resetFields()
  handleQuery()
}

const openForm = (type: string, id?: number) => {
  formRef.value.open(type, id)
}

const openDetail = (id: number) => {
  detailRef.value.open(id)
}

const handleConfirm = async (row: any) => {
  const { value: confirmReason } = await ElMessageBox.prompt(
    '请输入确认原因',
    '确认预约',
    { inputType: 'textarea' }
  )
  
  await confirmAppointment(row.id, confirmReason)
  ElMessage.success('确认成功')
  getList()
}

const handleReject = async (row: any) => {
  const { value: rejectReason } = await ElMessageBox.prompt(
    '请输入拒绝原因',
    '拒绝预约',
    { inputType: 'textarea', inputValidator: (value) => !!value || '拒绝原因不能为空' }
  )
  
  await rejectAppointment(row.id, rejectReason)
  ElMessage.success('拒绝成功')
  getList()
}

const handleAssign = (row: any) => {
  assignmentRef.value.open(row.id)
}

const handleDelete = async (id: number) => {
  await ElMessageBox.confirm('确定要删除该预约吗？', '提示', { type: 'warning' })
  await deleteAppointment(id)
  ElMessage.success('删除成功')
  getList()
}

// 状态判断方法
const canEdit = (status: AppointmentStatus) => {
  return status === AppointmentStatus.PENDING
}

const canConfirm = (status: AppointmentStatus) => {
  return status === AppointmentStatus.WAITING_RECYCLER_CONFIRM
}

const canReject = (status: AppointmentStatus) => {
  return status === AppointmentStatus.WAITING_RECYCLER_CONFIRM
}

const canAssign = (status: AppointmentStatus) => {
  return status === AppointmentStatus.PENDING
}

const canDelete = (status: AppointmentStatus) => {
  return status === AppointmentStatus.PENDING || status === AppointmentStatus.CANCELLED
}

onMounted(() => {
  getList()
})
</script>
```

### 6.2 APP端列表页面
```vue
<template>
  <div class="app-page">
    <!-- 搜索栏 -->
    <div class="search-bar">
      <el-input 
        v-model="queryParams.appointmentNo" 
        placeholder="搜索预约单号"
        clearable
        @clear="handleQuery"
        @keyup.enter="handleQuery"
      >
        <template #suffix>
          <el-icon @click="handleQuery"><Search /></el-icon>
        </template>
      </el-input>
    </div>

    <!-- 筛选标签 -->
    <div class="filter-tabs">
      <el-tabs v-model="activeTab" @tab-change="handleTabChange">
        <el-tab-pane label="全部" name="all" />
        <el-tab-pane label="待处理" name="pending" />
        <el-tab-pane label="待确认" name="waiting" />
        <el-tab-pane label="已确认" name="confirmed" />
        <el-tab-pane label="已取消" name="cancelled" />
      </el-tabs>
    </div>

    <!-- 预约列表 -->
    <div class="appointment-list" v-loading="loading">
      <div 
        v-for="item in list" 
        :key="item.id" 
        class="appointment-item"
        @click="openDetail(item.id)"
      >
        <div class="item-header">
          <div class="appointment-no">{{ item.appointmentNo }}</div>
          <StatusTag :status="item.appointmentStatus" size="small" />
        </div>
        
        <div class="item-content">
          <div class="waste-info">
            <div class="waste-name">{{ item.wasteName }}</div>
            <div class="waste-detail">
              {{ item.wasteCode }} | {{ item.estimatedQuantity }}{{ item.quantityUnit }}
            </div>
          </div>
          
          <div class="time-info">
            <div class="pickup-time">
              期望取货：{{ formatDate(item.expectedPickupTime, 'MM-DD HH:mm') }}
            </div>
          </div>
          
          <div class="enterprise-info" v-if="item.recyclerEnterpriseName">
            <div class="recycler">回收企业：{{ item.recyclerEnterpriseName }}</div>
          </div>
        </div>
        
        <div class="item-footer">
          <div class="create-time">{{ formatDate(item.createTime) }}</div>
          <div class="actions">
            <el-button 
              v-if="canCancel(item.appointmentStatus)" 
              type="danger" 
              size="small" 
              @click.stop="handleCancel(item)"
            >
              取消
            </el-button>
          </div>
        </div>
      </div>
      
      <!-- 空状态 -->
      <el-empty v-if="!loading && list.length === 0" description="暂无预约记录" />
    </div>

    <!-- 加载更多 -->
    <div class="load-more" v-if="hasMore">
      <el-button @click="loadMore" :loading="loadingMore">加载更多</el-button>
    </div>

    <!-- 浮动操作按钮 -->
    <el-affix :offset="80" position="bottom">
      <div class="fab-container">
        <el-button 
          type="primary" 
          size="large" 
          circle 
          @click="$router.push('/waste/app/appointment/create')"
        >
          <el-icon><Plus /></el-icon>
        </el-button>
      </div>
    </el-affix>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, onMounted } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { Search, Plus } from '@element-plus/icons-vue'
import { getMyAppointmentPage, cancelMyAppointment } from '@/api/waste/appointment'
import { AppointmentStatus } from '@/types/waste/appointment'
import StatusTag from '@/components/waste/appointment/StatusTag.vue'

// 响应式数据
const loading = ref(false)
const loadingMore = ref(false)
const list = ref([])
const hasMore = ref(true)
const activeTab = ref('all')

const queryParams = reactive({
  pageNo: 1,
  pageSize: 20,
  appointmentNo: '',
  appointmentStatus: ''
})

// 方法定义
const getList = async (isLoadMore = false) => {
  if (isLoadMore) {
    loadingMore.value = true
  } else {
    loading.value = true
    queryParams.pageNo = 1
    list.value = []
  }
  
  try {
    const data = await getMyAppointmentPage(queryParams)
    if (isLoadMore) {
      list.value.push(...data.list)
    } else {
      list.value = data.list
    }
    hasMore.value = data.list.length === queryParams.pageSize
  } finally {
    loading.value = false
    loadingMore.value = false
  }
}

const handleQuery = () => {
  getList()
}

const handleTabChange = (tabName: string) => {
  const statusMap = {
    all: '',
    pending: AppointmentStatus.PENDING,
    waiting: AppointmentStatus.WAITING_RECYCLER_CONFIRM,
    confirmed: AppointmentStatus.CONFIRMED,
    cancelled: AppointmentStatus.CANCELLED
  }
  queryParams.appointmentStatus = statusMap[tabName] || ''
  getList()
}

const loadMore = () => {
  queryParams.pageNo++
  getList(true)
}

const openDetail = (id: number) => {
  $router.push(`/waste/app/appointment/detail/${id}`)
}

const handleCancel = async (item: any) => {
  const { value: cancelReason } = await ElMessageBox.prompt(
    '请输入取消原因',
    '取消预约',
    { inputType: 'textarea', inputValidator: (value) => !!value || '取消原因不能为空' }
  )
  
  await cancelMyAppointment(item.id, cancelReason)
  ElMessage.success('取消成功')
  getList()
}

const canCancel = (status: AppointmentStatus) => {
  return status === AppointmentStatus.PENDING || status === AppointmentStatus.WAITING_RECYCLER_CONFIRM
}

onMounted(() => {
  getList()
})
</script>

<style scoped>
.app-page {
  padding: 16px;
  background-color: #f5f5f5;
  min-height: 100vh;
}

.search-bar {
  margin-bottom: 16px;
}

.filter-tabs {
  background: white;
  border-radius: 8px;
  margin-bottom: 16px;
  padding: 0 16px;
}

.appointment-list {
  space-y: 12px;
}

.appointment-item {
  background: white;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: all 0.3s;
}

.appointment-item:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.appointment-no {
  font-weight: 600;
  color: #303133;
}

.item-content {
  margin-bottom: 12px;
}

.waste-info {
  margin-bottom: 8px;
}

.waste-name {
  font-weight: 500;
  color: #606266;
  margin-bottom: 4px;
}

.waste-detail {
  font-size: 12px;
  color: #909399;
}

.time-info, .enterprise-info {
  font-size: 14px;
  color: #606266;
  margin-bottom: 4px;
}

.item-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  color: #909399;
}

.load-more {
  text-align: center;
  margin-top: 20px;
}

.fab-container {
  position: fixed;
  bottom: 80px;
  right: 20px;
  z-index: 1000;
}
</style>
```

## 7. 组件开发规范

### 7.1 状态标签组件
```vue
<!-- StatusTag.vue -->
<template>
  <el-tag :type="tagType" :effect="tagEffect" :size="size">
    {{ statusText }}
  </el-tag>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { AppointmentStatus } from '@/types/waste/appointment'

interface Props {
  status: AppointmentStatus
  size?: 'large' | 'default' | 'small'
}

const props = withDefaults(defineProps<Props>(), {
  size: 'default'
})

const statusConfig = {
  [AppointmentStatus.PENDING]: { 
    text: '待处理', 
    type: 'warning', 
    effect: 'plain' 
  },
  [AppointmentStatus.WAITING_RECYCLER_CONFIRM]: { 
    text: '待确认', 
    type: 'primary', 
    effect: 'plain' 
  },
  [AppointmentStatus.CONFIRMED]: { 
    text: '已确认', 
    type: 'success', 
    effect: 'plain' 
  },
  [AppointmentStatus.REJECTED]: { 
    text: '已拒绝', 
    type: 'danger', 
    effect: 'plain' 
  },
  [AppointmentStatus.ORDER_GENERATED]: { 
    text: '已生成订单', 
    type: 'success', 
    effect: 'dark' 
  },
  [AppointmentStatus.CANCELLED]: { 
    text: '已取消', 
    type: 'info', 
    effect: 'plain' 
  }
}

const statusText = computed(() => statusConfig[props.status]?.text || '未知')
const tagType = computed(() => statusConfig[props.status]?.type || 'info')
const tagEffect = computed(() => statusConfig[props.status]?.effect || 'plain')
</script>
```

### 7.2 地理位置选择组件
```vue
<!-- LocationPicker.vue -->
<template>
  <div class="location-picker">
    <el-input
      v-model="addressText"
      placeholder="请输入地址或点击选择位置"
      readonly
      @click="openMapDialog"
    >
      <template #suffix>
        <el-icon class="cursor-pointer" @click="openMapDialog">
          <Location />
        </el-icon>
      </template>
    </el-input>
    
    <!-- 地图选择弹窗 -->
    <el-dialog v-model="mapDialogVisible" title="选择位置" width="800px">
      <div id="map-container" style="height: 400px;"></div>
      <template #footer>
        <el-button @click="mapDialogVisible = false">取消</el-button>
        <el-button type="primary" @click="confirmLocation">确定</el-button>
      </template>
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref, watch, nextTick } from 'vue'
import { Location } from '@element-plus/icons-vue'

interface Props {
  modelValue?: {
    address: string
    latitude?: number
    longitude?: number
  }
}

interface Emits {
  (e: 'update:modelValue', value: Props['modelValue']): void
}

const props = defineProps<Props>()
const emit = defineEmits<Emits>()

const addressText = ref('')
const mapDialogVisible = ref(false)
const selectedLocation = ref<{
  address: string
  latitude: number
  longitude: number
} | null>(null)

// 监听props变化
watch(() => props.modelValue, (newValue) => {
  if (newValue) {
    addressText.value = newValue.address
  }
}, { immediate: true })

const openMapDialog = () => {
  mapDialogVisible.value = true
  nextTick(() => {
    initMap()
  })
}

const initMap = () => {
  // 这里集成地图API（如高德地图、百度地图等）
  // 示例代码，需要根据实际使用的地图API进行调整
  console.log('初始化地图')
}

const confirmLocation = () => {
  if (selectedLocation.value) {
    addressText.value = selectedLocation.value.address
    emit('update:modelValue', selectedLocation.value)
  }
  mapDialogVisible.value = false
}
</script>
```

## 8. 开发注意事项

### 8.1 数据验证
- 所有表单必须进行前端验证
- 联系电话格式验证
- 时间逻辑验证（期望取货时间不能早于当前时间）
- 数量必须为正数
- 必填字段不能为空

### 8.2 权限控制
- 使用 `v-hasPermi` 指令控制按钮权限
- APP端数据隔离，只能操作自己企业的数据
- 状态流转需要验证用户权限

### 8.3 状态管理
- 使用Pinia管理全局状态
- 预约状态变更后及时更新列表
- 缓存常用的字典数据

### 8.4 性能优化
- 列表数据使用虚拟滚动（数据量大时）
- 图片懒加载
- 合理使用 v-show 和 v-if
- 组件按需加载

### 8.5 移动端适配
- APP端页面需要适配移动设备
- 使用响应式设计
- 触摸友好的交互设计
- 考虑网络状况，提供离线功能

## 9. 测试要求

### 9.1 单元测试
- 组件渲染测试
- 方法功能测试
- 数据验证测试
- 状态流转测试

### 9.2 集成测试
- API接口调用测试
- 页面跳转测试
- 权限控制测试
- 双端数据一致性测试

## 10. 部署说明

### 10.1 构建命令
```bash
# 开发环境
npm run dev

# 生产构建
npm run build

# 预览构建结果
npm run preview

# 类型检查
npm run type-check
```

### 10.2 环境配置
- 开发环境：`.env.development`
- 生产环境：`.env.production`
- 测试环境：`.env.test`

---

**注意**: 本文档基于 Vue 3 + TypeScript + Element Plus + Vite 技术栈，开发过程中请严格遵循代码规范和最佳实践。特别注意双端（管理后台+APP端）的功能差异和数据隔离要求。